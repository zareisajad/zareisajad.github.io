<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <meta name="description" content="Sajad Zarei Personal Blog">
  <link rel="stylesheet" href="/styles.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <title>
  Sajad Zarei 
   - مدیریت فایل‌های dotfiles با گیت
</title>
</head> 

<body>
  <section>
    <header class="d-flex justify-content-between align-items-center py-3 mb-4 ">
      <div class="d-flex align-items-center gap-3 flex-row-reverse">
        <a href="/blog">Blog</a>
        <a href="/notes">Notes</a>
        <a href="/reading">Reading</a>
      </div>
      <div class="logo">
        <a href="/">
          <h1>Sajad Zarei</h1>
        </a>
      </div>
    </header>
    <div class="">
      

<div class="d-flex flex-column gap-2 mb-3">
  <h1 class="title">مدیریت فایل‌های dotfiles با گیت</h1>
  <div class="d-flex gap-2">

    <small>1404-10-12</small>-
    <small>2 دقیقه</small>
  </div>

<div>

<div class="page-content">

  <p>الان هر روز به کانفیگ ها ور میرم و برای ذخیره کردنشون چالش داشتم.
مدتی هست که یادداشت هامو تو یک ریپوی خصوصی با obsidian ذخیره میکنم و خیلی سیستم خوبیه.
این کارو برای کانفیگ ها امتحان کردم ولی مشکلش اینه که کار سختیه هر دفعه تغییرات جدید رو کپی کنی توی فایل هایی که روی گیت هست.</p>
<p>برای حل این مشکل باز هم قهرمان داستان git وارد می شود با چیزی به اسم bare repository:</p>
<h5 id="ynjwry-myszymsh">اینجوری میسازیمش:</h5>
<pre data-lang="zsh" style="background-color:#282828;color:#fdf4c1aa;" class="language-zsh "><code class="language-zsh" data-lang="zsh"><span style="color:#fdf4c1;">git init --bare $HOME/.dotfiles
</span></code></pre>
<p>و یا میتونید ریپوزیتوری موجود رو به صورت bare توی سیستم clone کنید:</p>
<pre data-lang="zsh" style="background-color:#282828;color:#fdf4c1aa;" class="language-zsh "><code class="language-zsh" data-lang="zsh"><span style="color:#fdf4c1;">git clone --bare https://github.com/YOUR_USERNAME/dotfiles.git $HOME/.dotfiles
</span></code></pre>
<h5 id="yh-alias-brsh-bszyd">یه alias براش بسازید</h5>
<p>اینو به zshrc. اضافه میکنیم</p>
<pre data-lang="zsh" style="background-color:#282828;color:#fdf4c1aa;" class="language-zsh "><code class="language-zsh" data-lang="zsh"><span style="color:#fabd2f;">alias </span><span style="color:#8ec07c;">dtf</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&#39;/usr/bin/git --git-dir=$HOME/.dotfiles --work-tree=$HOME&#39;
</span></code></pre>
<p>الان مثلا میتونیم بگیم <code>dtf status</code> و بقیه کامندها.</p>
<h5 id="bh-gyt-mygym-bqyh-fyl-hrw-bykhyl-shw">به گیت میگیم بقیه فایل هارو بیخیال شو</h5>
<pre data-lang="zsh" style="background-color:#282828;color:#fdf4c1aa;" class="language-zsh "><code class="language-zsh" data-lang="zsh"><span style="color:#fdf4c1;">dtf config --local status.showUntrackedFiles no‍‍‍‍‍
</span></code></pre>
<h5 id="fyl-hy-khnfyg-rw-dfh-mykhnym">فایل های کانفیگ رو اضافه میکنیم</h5>
<pre data-lang="zsh" style="background-color:#282828;color:#fdf4c1aa;" class="language-zsh "><code class="language-zsh" data-lang="zsh"><span style="color:#fdf4c1;">dtf add ~/.config/i3
</span><span style="color:#fdf4c1;">dtf add ~/.config/nvim 
</span><span style="color:#fdf4c1;">dtf add ~/.zshrc 
</span><span>
</span><span style="color:#fdf4c1;">dtf commit -m </span><span style="color:#b8bb26;">&quot;Initial dotfiles&quot;
</span></code></pre>
<h5 id="w-dr-akhr-push-khnyd">و در آخر push کنید</h5>
<pre data-lang="zsh" style="background-color:#282828;color:#fdf4c1aa;" class="language-zsh "><code class="language-zsh" data-lang="zsh"><span style="color:#fdf4c1;">dtf remote add origin git@github.com:YOUR_USERNAME/dotfiles.git
</span><span>
</span><span style="color:#fdf4c1;">dtf push -u origin master
</span></code></pre>
<p>از اونجایی که من نمیخواستم هر دفعه <code>dtf commit</code> انجام بدم یه alias دیگه هم اضافه کردم:</p>
<pre data-lang="zsh" style="background-color:#282828;color:#fdf4c1aa;" class="language-zsh "><code class="language-zsh" data-lang="zsh"><span style="color:#fabd2f;">alias </span><span style="color:#8ec07c;">dtfpush</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&#39;dtf add -f ~/.zshrc ~/.config/i3 ~/.config/nvim &amp;&amp; dtf commit -m &quot;update dotfiles&quot; &amp;&amp; dtf push&#39;
</span></code></pre>
<p>الان دیگه فرق نمیکنه کجای لینوکس هستید با یه کامند <code>dtfpush</code> تمام کانفیگ ها push میشه تو گیت هاب.</p>
<p>تفاوت اصلی با ریپوی معمولی گیت اینه که نیازی نیست هیچ فایلی رو جا به جا کنید.</p>
<p>الان گیت از HOME$ تمام تغییراتی که اعمال میشه رو زیر نظر داره و فقط با یه کامند ساده از هرجا میتونید commit کنید و تغییراتو push کنید توی گیت هاب.</p>
<p>و از اونجایی که من زیاد مدام در حال تغییر distro هستم برای اینکه توی یک سیستم تازه نصب شده تمام ابزارهایی که برای این کانفیگ ها نیاز به نصب دارن رو نصب کنم یه اسکریپت ساده هم اضافه کردم:</p>
<p>bootstrap.sh:</p>
<pre data-lang="zsh" style="background-color:#282828;color:#fdf4c1aa;" class="language-zsh "><code class="language-zsh" data-lang="zsh"><span style="font-style:italic;color:#928374;">#!/usr/bin/env bash
</span><span>
</span><span style="color:#fdf4c1;">sudo pacman -Syu --needed --noconfirm
</span><span>
</span><span style="color:#fdf4c1;">sudo pacman -S --needed \
</span><span style="color:#fdf4c1;">    tmux telegram-desktop zsh zola nodejs npm nvim \
</span><span style="color:#fdf4c1;">    git picom obsidian okular mpv konsole obs-studio \
</span><span style="color:#fdf4c1;">    ttf-jetbrains-mono polybar pamixer feh xorg-xrandr \
</span><span style="color:#fdf4c1;">    i3status brightnessctl numlockx python-virtualenv python-pynvim \
</span><span style="color:#fdf4c1;">    luarocks rust neovim 
</span><span>    
</span></code></pre>
<p>این اسکریپت رو اضافه کردم به <code>dotfiles/scripts</code> و با ران کردن این اسکریپت دیگه نیازی نیست تمام ابزارهارو تکی نصب کنیم.</p>


</div>



    </div>
  </section>

</body>

</html>
